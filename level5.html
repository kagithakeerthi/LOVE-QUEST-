<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸ’— Level 5 - Love Maze ðŸ’—</title>

<style>
    body{
        margin:0;
        background:linear-gradient(135deg,#ffe6f2,#fff0f5);
        font-family: 'Poppins', sans-serif;
        display:flex;
        flex-direction:column;
        align-items:center;
        padding-top:20px;
        height:100vh;
        overflow:hidden;
    }

    h1{
        color:#ff4d88;
        font-size:30px;
        margin-bottom:10px;
        text-align:center;
        text-shadow:2px 2px #ffcce0;
    }

    /* Maze Grid */
    #maze{
        width:90vw;
        max-width:400px;
        height:90vw;
        max-height:400px;
        display:grid;
        grid-template-columns:repeat(7, 1fr);
        grid-template-rows:repeat(7, 1fr);
        gap:4px;
        margin-bottom:20px;
    }

    .cell{
        width:100%;
        height:100%;
        background:white;
        border-radius:10px;
        box-shadow:0 0 6px rgba(0,0,0,0.2);
        transition:background 0.3s;
    }

    .wall{
        background:#ff99c2;
    }

    .player{
        background:#ff0066 !important;
        border:3px solid white;
        border-radius:50%;
        transition:transform 0.2s ease;
    }

    .goal{
        background:#00cc66;
        border-radius:10px;
        animation:pulse 1s infinite;
    }

    @keyframes pulse{
        0%{transform:scale(1);}
        50%{transform:scale(1.1);}
        100%{transform:scale(1);}
    }

    /* Arrows */
    .controls{
        display:flex;
        flex-direction:column;
        align-items:center;
        gap:8px;
        margin-top:10px;
    }
    .row{
        display:flex;
        gap:10px;
    }
    .btn{
        width:60px;
        height:60px;
        font-size:26px;
        border:none;
        border-radius:10px;
        background:#ff80bf;
        color:white;
        font-weight:bold;
        box-shadow:0 0 8px rgba(0,0,0,0.2);
        touch-action:manipulation;
        transition:transform 0.2s;
    }
    .btn:active{
        transform:scale(0.9);
    }

    /* Popup Message */
    #popup{
        position:fixed;
        top:50%;
        left:50%;
        transform:translate(-50%,-50%);
        background:white;
        padding:20px 30px;
        border-radius:15px;
        box-shadow:0 0 15px rgba(0,0,0,0.3);
        text-align:center;
        font-size:20px;
        color:#ff4d88;
        display:none;
        animation:fadeIn 0.5s ease;
    }
    @keyframes fadeIn{
        from{opacity:0; transform:translate(-50%,-60%);}
        to{opacity:1; transform:translate(-50%,-50%);}
    }
</style>
</head>

<body>

<h1>ðŸ’— Kittu's Magical Maze ðŸ’—</h1>

<div id="maze"></div>

<div class="controls">
    <button class="btn up">â¬†</button>
    <div class="row">
        <button class="btn left">â¬…</button>
        <button class="btn right">âž¡</button>
    </div>
    <button class="btn down">â¬‡</button>
</div>

<div id="popup"></div>

<script>
// ---------------- MAZE GAME ----------------

let maze, playerEl, popup;

// 7Ã—7 Maze Layout
const mazeLayout = [
    [0,1,0,0,0,1,0],
    [0,1,0,1,0,1,0],
    [0,0,0,1,0,0,0],
    [1,1,0,1,1,1,0],
    [0,0,0,0,0,1,0],
    [0,1,1,1,0,1,0],
    [0,0,0,0,0,0,0]
];

// Player start
let player = { r:0, c:0 };

// Goal end
const goal = { r:6, c:6 };

window.onload = function(){
    maze = document.getElementById("maze");
    popup = document.getElementById("popup");
    generateMaze();
    placePlayer(player.r, player.c);
};

// Create maze UI
function generateMaze(){
    maze.innerHTML = "";
    for(let r=0; r<7; r++){
        for(let c=0; c<7; c++){
            const cell = document.createElement("div");
            cell.className = "cell";

            if(mazeLayout[r][c] === 1) cell.classList.add("wall");
            if(r === goal.r && c === goal.c) cell.classList.add("goal");

            cell.id = `cell-${r}-${c}`;
            maze.appendChild(cell);
        }
    }
}

// Show player
function placePlayer(r, c){
    if(playerEl) playerEl.classList.remove("player");
    playerEl = document.getElementById(`cell-${r}-${c}`);
    playerEl.classList.add("player");
}

// Check boundaries
function inBounds(r,c){
    return (r>=0 && r<7 && c>=0 && c<7);
}

// Try movement
function tryMove(dr, dc){
    const nr = player.r + dr;
    const nc = player.c + dc;

    if(!inBounds(nr,nc)){
        showPopup("ðŸŒ¸ Oh cutie, donâ€™t be sad... Thatâ€™s outside the maze! ðŸŒ¸");
        return;
    }
    if(mazeLayout[nr][nc] === 1){
        showPopup("ðŸ’” Oh cutie, donâ€™t be sad... Thatâ€™s a wall! ðŸ’”");
        return;
    }

    movePlayer(nr, nc);
}

// Move
function movePlayer(r,c){
    player.r = r;
    player.c = c;
    placePlayer(r,c);

    if(r===goal.r && c===goal.c){
        setTimeout(()=>{
            showPopup("ðŸ’˜ Oh darling, you got the key! ðŸ’˜");
            setTimeout(()=>{ window.location.href="level6.html"; },2000);
        },150);
    }
}

// Popup
function showPopup(msg){
    popup.innerHTML = msg;
    popup.style.display = "block";
    setTimeout(()=>{ popup.style.display="none"; },1500);
}

// Button Controls
document.querySelector(".up").onclick   = ()=>tryMove(-1,0);
document.querySelector(".down").onclick = ()=>tryMove(1,0);
document.querySelector(".left").onclick = ()=>tryMove(0,-1);
document.querySelector(".right").onclick= ()=>tryMove(0,1);

// Keyboard
document.addEventListener("keydown", (e)=>{
    if(e.key==="ArrowUp") tryMove(-1,0);
    if(e.key==="ArrowDown") tryMove(1,0);
    if(e.key==="ArrowLeft") tryMove(0,-1);
    if(e.key==="ArrowRight") tryMove(0,1);
});

// Swipe Gestures for Mobile
let touchStartX=0, touchStartY=0;
document.addEventListener("touchstart", (e)=>{
    const touch = e.changedTouches[0];
    touchStartX = touch.screenX;
    touchStartY = touch.screenY;
}, false);

document.addEventListener("touchend", (e)=>{
    const touch = e.changedTouches[0];
    let dx = touch.screenX - touchStartX;
    let dy = touch.screenY - touchStartY;

    if(Math.abs(dx) > Math.abs(dy)){
        if(dx > 30) tryMove(0,1);   // swipe right
        else if(dx < -30) tryMove(0,-1); // swipe left
    } else {
        if(dy > 30) tryMove(1,0);   // swipe down
        else if(dy < -30) tryMove(-1,0); // swipe up
    }
}, false);
</script>

</body>
</html>



